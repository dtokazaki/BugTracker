<!DOCTYPE>
<html>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
</head>
<body>

<body style="margin:25">
    <a href = "table.html">
        <button type="button" class="btn btn-default disabled">Table</button></a>
    <a href = "index.html">
        <button type="button" class="btn btn-default">Home</button></a>
    <div class="btn-group" role="group" aria-label="...">
        <a href = "tester.html" class="btn btn-default">Tester</a>
        <a href="developer.html" class="btn btn-default">Developer</a>
        <a href="manager.html" class="btn btn-default">Manager</a>
    </div>
<br>
<br>

<script type="text/javascript">
function bugData() {
    var data;
    $.ajax({
        url: "https://052stnmylg.execute-api.us-west-1.amazonaws.com/firstTest/getAllForms",
        data: data,
        type: "GET",
        beforeSend: function(xhr) {
            xhr.setRequestHeader('x-api-key', '8EWZgXbwTg3SMjstxbb61UOWCOoqM4W96BjZAFK8');
        },
        success: function (data) {
            var myTableDiv = document.getElementById("testTable");
            var body = document.body;
            var tbl = document.createElement('table');
            tbl.style.width  = '800';
            tbl.style.border = '1px solid black';
            var tr = tbl.insertRow();
            
            var td1 = tr.insertCell();
            td1.appendChild(document.createTextNode("ID"));
            td1.style.border = '2px solid black';
            
            var td2 = tr.insertCell();
            td2.appendChild(document.createTextNode("Description"));
            td2.style.border = '2px solid black';
            
            var td3 = tr.insertCell();
            td3.appendChild(document.createTextNode("What you were doing"));
            td3.style.border = '2px solid black';
            
            var td4 = tr.insertCell();
            td4.appendChild(document.createTextNode("Developer"));
            td4.style.border = '2px solid black';
            
            var td5 = tr.insertCell();
            td5.appendChild(document.createTextNode("Status"));
            td5.style.border = '2px solid black';
            
            var i = 0;

            data.forEach(function(bug) {
                var id = bug['code'];

                //id
                var tr = tbl.insertRow();
                i++;
                var td1 = tr.insertCell();
                td1.appendChild(document.createTextNode(bug['code']));
                td1.style.border = '1px solid black';

                //description
                var td2 = tr.insertCell();
                td2.appendChild(document.createTextNode(bug['description']));
                td2.style.border = '1px solid black';

                //what client was doing
                var td3 = tr.insertCell();
                td3.appendChild(document.createTextNode(bug['details']));
                td3.style.border = '1px solid black';
                
                //dev name
                var td4 = tr.insertCell();
                var devName = bug['developer'];
                if(devName==" ") devName = "not assigned";
                td4.appendChild(document.createTextNode(devName));
                td4.style.border = '1px solid black';
                
                //status
                var td5 = tr.insertCell();
                td5.appendChild(document.createTextNode(bug['status']));
                td5.style.border = '1px solid black';
               
            }); 
            body.appendChild(tbl);
        }
    })

}

bugData();
</script>

</body>
</html>
